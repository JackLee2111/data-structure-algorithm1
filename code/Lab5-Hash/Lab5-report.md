# Lab5 - Hash Report
##### 2021201709 李俊霖
## 1. 测试数据的构造
### 1.1.
**基本思想**：
+ 一种二叉搜索树，树的左右子树都是AVL树，树的左右子树高度之差（平衡因子）的绝对值不超过1。
+ 通过旋转调整来保持平衡因子符合规则。

**基本功能实现思路**：
+ 插入：
  + 按照二叉搜索树的方式插入新节点，大的往右，小的往左。插入之后需要检查是否满足平衡条件，进行重平衡操作。
  + 重平衡过程中有单旋双旋等四种旋转操作，此处不再一一赘述。
### 1.2.

## 2. 哈希函数的实现
基本思路：
+ 本问题需要进行区间翻转，涉及到交换，想到splay树中的左右子树旋转和交换。
+ 对 1 - n 建一个平衡树，该序列即为平衡树的中序遍历，最终需要输出的也是这棵树的中序遍历。
+ splay树反转区间的思路为：如果需要翻转的区间为l到r，先将l-1转到根，再将r+1转到l-1的右孩子。这个时候可以发现，l到r这个区间内部在树中即为r+1的左子树。对此时只要交换所有节点的左右子树，即可实现对l到r区间的翻转。
+ 用tag标记r+1的左孩子，把需要翻转的子树的根标记，之后访问到该点时交换其左右子树和将标记下传。
## 3.测试结果
## 4.问题回答
### 4.1.问题1
+ **问：将utf-8字符串“当作”ascii字符串进行处理，使用针对ascii字符串的哈希函数，实际效果如何（相比“针对utf-8字符串设计的哈希函数）？可能的原因是什么？**
+ 答：

### 4.2.问题2
+ **问：在你的测试中，不同的冲突处理策略性能如何？可能的原因是什么？**
+ 答：

### 4.3.问题3
+ **问：设计哈希函数时，我们往往假定字符串每个位置上出现字符集内每个字符的概率都是相等的，但实际的数据集往往并不满足这一点。这可能造成什么影响？**
+ 答：

### 4.4.问题4
+ **问：对于“字符串到数字映射”问题(给定一组字符串以及它们各自对应的数字，然后多次查询某个字符串对应的数字，可能会在中途更新某个字符串对应的数字)，哈希表并不总是最优方案。请描述一种输入数据，再举出一种哈希表之外的数据结构，对这种数据，这种数据结构能比哈希表更高效地解决“字符串到数字映射”问题。**
+ 答：


## 5.总结与收获
+ 通过这次lab，笔者对各种平衡树的基本思路有了更深刻的理解和认识。比如对于问题二，笔者刚开始时没有马上想到用平衡树的思路去解决问题，经过学习和思考后发现，这种交换与平衡树的交换左右子树有异曲同工之妙，遂深感平衡树的用处之大！
+ 由于树的代码写得不多，笔者在调试的过程中花费了大量的经精力，尤其是红黑树和AVL树部分，在不断的调试和试错中，对树的基本操作、遍历、前驱后继等也更熟悉。
## 6.参考资料
1. 《数据结构(c++语言版)》邓俊辉编著-清华大学出版社
2. [Splay处理区间操作——翻转操作(Reverse)](https://www.luogu.com.cn/blog/pks-LOVING/splay-chu-li-ou-jian-cao-zuo-fan-zhuai-cao-zuo-reverse)

